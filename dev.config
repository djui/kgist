%% -*- mode: erlang;erlang-indent-level: 2;indent-tabs-mode: nil -*-
[ {kgist, [ {view_dir, "priv/views"}
          , {default_language, "erlang"}
          ]}
, {mnesia, [ {dir, "priv/data"}
           ]}
, {webmachine, [ {host, "0.0.0.0"}
               , {port, 8001}
               , {log_dir, "priv/log"}
               , {dispatch, [ {[],
                               kgist_main_resource,
                               []}
                            , {["gist"],
                               kgist_gist_resource,
                               []}
                            , {["gist", id],
                               {kgist_gist_resource, is_gist},
                               kgist_gist_resource,
                               []}
                            , {["gist", id, "download"],
                               {kgist_gist_resource, is_gist},
                               kgist_gist_resource,
                               [{action, download}]}
                            , {["gist", id, "raw"],
                               {kgist_gist_resource, is_gist},
                               kgist_gist_resource, 
                               [{action, raw}]}
                            , {['*'],
                               kgist_static_resource,
                               [{root, "www"}]}
                            ]}
               ]}
].
